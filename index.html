<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buscador de Máquinas de Gimnasio</title>
    <!-- Tailwind CSS para un diseño moderno y responsivo -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827;
        }
        .card {
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        #priceModal.hidden {
            display: none;
        }
    </style>
</head>
<body class="text-white">

    <div class="container mx-auto p-4 md:p-8">

        <!-- Encabezado y barra de búsqueda -->
        <header class="text-center mb-8 md:mb-12">
            <h1 class="text-4xl md:text-5xl font-bold mb-2">GymFinder</h1>
            <p class="text-lg text-gray-400">Encuentra la máquina perfecta para tu rutina</p>
            <div class="mt-8 max-w-2xl mx-auto">
                <div class="relative mb-4">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                        </svg>
                    </div>
                    <input type="text" id="searchInput"
                           class="block w-full bg-gray-800 border border-gray-700 rounded-full py-3 pl-10 pr-4 text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
                           placeholder="Buscar por nombre o grupo muscular (ej. 'Prensa' o 'Piernas')...">
                </div>
                <button id="generatePriceListBtn" class="bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-full transition-colors duration-300">
                    Generar Lista de Precios con IA
                </button>
            </div>
        </header>

        <main id="resultsContainer" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6 md:gap-8">
        </main>
        
        <div id="noResults" class="hidden text-center py-16">
            <h3 class="text-2xl font-semibold text-gray-300">No se encontraron máquinas</h3>
            <p class="text-gray-500 mt-2">Intenta con otro término de búsqueda.</p>
        </div>
    </div>

    <div id="priceModal" class="hidden fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50">
        <div class="bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col">
            <div class="p-4 border-b border-gray-700 flex justify-between items-center">
                <h2 class="text-2xl font-bold">Lista de Precios (IA)</h2>
                <button id="closeModalBtn" class="text-gray-400 hover:text-white">&times;</button>
            </div>
            <div id="modalContent" class="p-6 overflow-y-auto">
            </div>
        </div>
    </div>

    <script>
        const gymMachines = [
            {
                name: 'Cinta de Correr EVOT',
                muscleGroup: 'Cardio',
                description: 'Una experiencia de entrenamiento profesional en tu gimnasio. Ideal para los amantes del running.',
                imageUrl: 'https://placehold.co/600x400/1f2937/ffffff?text=Cinta+EVOT',
                manualUrl: 'BT_Pro_2024_Complete_28marzo ve.pdf' 
            },
            {
                name: 'CTS8001 Press de Pecho',
                muscleGroup: 'Pecho',
                description: 'Máquina de la línea HAMMER TANK para un entrenamiento de pecho de alta calidad y estándar profesional.',
                imageUrl: 'https://placehold.co/600x400/1f2937/ffffff?text=CTS8001+Chest+Press',
                manualUrl: 'CATALOG-COMING TECH 2025C.pdf'
            },
            {
                name: 'Escalate Stairclimber 550',
                muscleGroup: 'Cardio',
                description: 'El galardonado Escalate Stairclimber, que ofrece un entrenamiento cardiovascular superior con 20 niveles de resistencia.',
                imageUrl: 'https://placehold.co/600x400/1f2937/ffffff?text=Escalate+550',
                manualUrl: 'Intenza Cardio Lineup_EN 2025.pdf'
            },
            {
                name: 'Dezign Line Biceps Curl',
                muscleGroup: 'Brazos',
                description: 'La línea Dezign para un curl de bíceps con un perfil de resistencia que se adapta a la curva de fuerza natural del músculo.',
                imageUrl: 'https://placehold.co/600x400/1f2937/ffffff?text=Dezign+Biceps+Curl',
                manualUrl: 'Intenza Dezign Line Zone Line_EN 2025.pdf'
            },
            {
                name: 'FORZA HERO Prensa de Piernas',
                muscleGroup: 'Piernas',
                description: 'Máquina para ejercitar cuádriceps, glúteos e isquiotibiales. De la robusta línea premium FORZA HERO.',
                imageUrl: 'https://placehold.co/600x400/1f2937/ffffff?text=Forza+Leg+Press',
                manualUrl: 'BT_Pro_2024_Complete_28marzo ve.pdf'
            },
            {
                name: 'Dual Adjustable Pulley',
                muscleGroup: 'Versátil',
                description: 'Proporciona ejercicios casi ilimitados para un entrenamiento de resistencia de cuerpo completo con 18 posiciones de cable.',
                imageUrl: 'https://placehold.co/600x400/1f2937/ffffff?text=Dual+Pulley',
                manualUrl: 'Intenza-Cable-Stations-And-Machines-Sell-Sheet.pdf'
            },
             {
                name: 'ZROPRO Air Bike',
                muscleGroup: 'Cardio HIIT',
                description: 'Bicicleta de Aire especialmente diseñada para el ejercicio cardiovascular. Trabaja de forma global la resistencia.',
                imageUrl: 'https://placehold.co/600x400/1f2937/ffffff?text=ZROPRO+Air+Bike',
                manualUrl: 'BT_Pro_2024_Complete_28marzo ve.pdf'
            },
            {
                name: 'IMH708 Hack Squat',
                muscleGroup: 'Piernas',
                description: 'De la línea MINI HAMMER, esta máquina de Hack Squat es compacta y eficiente para el trabajo de piernas.',
                imageUrl: 'https://placehold.co/600x400/1f2937/ffffff?text=IMH708+Hack+Squat',
                manualUrl: 'CATALOG-COMING TECH 2025C.pdf'
            }
        ];

        const searchInput = document.getElementById('searchInput');
        const resultsContainer = document.getElementById('resultsContainer');
        const noResultsMessage = document.getElementById('noResults');
        const generatePriceListBtn = document.getElementById('generatePriceListBtn');
        const priceModal = document.getElementById('priceModal');
        const closeModalBtn = document.getElementById('closeModalBtn');
        const modalContent = document.getElementById('modalContent');

        function displayMachines(machines) {
            resultsContainer.innerHTML = '';
            if (machines.length === 0) {
                noResultsMessage.classList.remove('hidden');
            } else {
                noResultsMessage.classList.add('hidden');
                machines.forEach(machine => {
                    const card = `
                        <div class="card bg-gray-800 rounded-lg overflow-hidden shadow-lg border border-gray-700 flex flex-col">
                            <img src="${machine.imageUrl}" alt="Imagen de ${machine.name}" class="w-full h-48 object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x400/1f2937/ffffff?text=Imagen+no+disponible';">
                            <div class="p-5 flex flex-col flex-grow">
                                <span class="inline-block bg-blue-600 text-white text-xs font-semibold px-2 py-1 rounded-full uppercase mb-2 self-start">${machine.muscleGroup}</span>
                                <h2 class="text-xl font-bold mb-2">${machine.name}</h2>
                                <p class="text-gray-400 text-sm flex-grow">${machine.description}</p>
                                <a href="${machine.manualUrl}" target="_blank" rel="noopener noreferrer" class="mt-4 inline-block bg-blue-700 hover:bg-blue-800 text-white font-bold py-2 px-4 rounded-lg text-center transition-colors duration-200">
                                    Ver Manual
                                </a>
                            </div>
                        </div>
                    `;
                    resultsContainer.innerHTML += card;
                });
            }
        }

        function filterMachines() {
            const searchTerm = searchInput.value.toLowerCase().trim();
            const filteredMachines = gymMachines.filter(machine => 
                machine.name.toLowerCase().includes(searchTerm) || machine.muscleGroup.toLowerCase().includes(searchTerm)
            );
            displayMachines(filteredMachines);
        }
        
        async function generateAndShowPriceList() {
            priceModal.classList.remove('hidden');
            modalContent.innerHTML = '<p class="text-center">Generando lista de precios con IA...</p>';

            const machineNames = gymMachines.map(m => m.name).join(', ');
            const userQuery = `Actúa como un experto en ventas de equipos de gimnasio. Basado en la siguiente lista de máquinas, genera una lista de precios sugeridos en USD. Asegúrate de que los precios sean realistas para equipos comerciales de alta gama, en un rango de $1,500 a $8,000 USD. Formatea la respuesta como un objeto JSON con una clave 'precios' que contenga un array de objetos, donde cada objeto tenga 'nombre' y 'precio' como claves. Lista de máquinas: ${machineNames}`;
            
            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                generationConfig: {
                    responseMimeType: "application/json",
                    responseSchema: {
                        type: "OBJECT",
                        properties: {
                            precios: {
                                type: "ARRAY",
                                items: {
                                    type: "OBJECT",
                                    properties: {
                                        nombre: { type: "STRING" },
                                        precio: { type: "NUMBER" }
                                    },
                                    required: ["nombre", "precio"]
                                }
                            }
                        }
                    }
                }
            };
            
            const apiKey = "";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                if (!response.ok) {
                    throw new Error(`Error de API: ${response.statusText}`);
                }

                const result = await response.json();
                const jsonText = result.candidates?.[0]?.content?.parts?.[0]?.text;
                
                if (jsonText) {
                    const data = JSON.parse(jsonText);
                    displayPriceList(data.precios);
                } else {
                    throw new Error("No se recibió contenido válido de la IA.");
                }

            } catch (error) {
                console.error("Error al generar la lista de precios:", error);
                modalContent.innerHTML = `<p class="text-center text-red-400">Hubo un error al generar la lista. Por favor, intenta de nuevo. <br><small>${error.message}</small></p>`;
            }
        }
        
        function displayPriceList(priceList) {
            let tableHTML = `
                <table class="w-full text-left">
                    <thead class="border-b border-gray-600">
                        <tr>
                            <th class="p-3">Máquina</th>
                            <th class="p-3 text-right">Precio Sugerido (USD)</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            priceList.forEach(item => {
                const formattedPrice = new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(item.precio);
                tableHTML += `
                    <tr class="border-b border-gray-700">
                        <td class="p-3">${item.nombre}</td>
                        <td class="p-3 text-right font-mono">${formattedPrice}</td>
                    </tr>
                `;
            });
            
            tableHTML += '</tbody></table>';
            modalContent.innerHTML = tableHTML;
        }


        searchInput.addEventListener('input', filterMachines);
        generatePriceListBtn.addEventListener('click', generateAndShowPriceList);
        closeModalBtn.addEventListener('click', () => priceModal.classList.add('hidden'));

        priceModal.addEventListener('click', (event) => {
            if (event.target === priceModal) {
                priceModal.classList.add('hidden');
            }
        });

        displayMachines(gymMachines);
    </script>
</body>
</html>